# Serverless Website Analytics

This is a CDK serverless website analytics solution that can be deployed to AWS. This construct creates backend,
frontend and the ingestion APIs.

This solution was designed for multiple websites with low to moderate traffic. It is designed to be as cheap as
possible, but it is not free. The cost is mostly driven by the ingestion API that saves the data to S3 through a
Kinesis Firehose.

You can see a LIVE DEMO [HERE](https://demo.serverless-website-analytics.com/).

## Objectives
- Easy to deploy in your AWS account, any *region
- The target audience is small to medium websites with low to moderate traffic (less than 10M views)
- Lowest possible cost
- KISS
- No direct server side state
- Low maintenance

The main objective is to keep it simple and the operational cost low, keeping true to "scale to 0" tenants of serverless,
even if it goes against "best practices".

## Getting started

### Serverside setup

> ⚠️ Requires your project `aws-cdk` and `aws-cdk-lib` > 2.79.1

Install the [CDK construct library](https://www.npmjs.com/package/serverless-website-analytics) in your project:
```
npm install serverless-website-analytics
```

Add the construct to your stack:
```typescript
import { ServerlessWebsiteAnalytics } from 'serverless-website-analytics';

export class App extends cdk.Stack {
  constructor(scope: Construct, id: string, props?: cdk.StackProps) {
    super(scope, id, props);

    ...

    new Swa(this, 'swa-demo-codesnippet-screenshot', {
      environment: 'prod',
      awsEnv: {
        account: this.account,
        region: this.region,
      },
      sites: ['example.com', 'tests1', 'tests2'],
      allowedOrigins: ['*'],
      /* None and Basic Auth also available, see options below */
      auth: {
        cognito: {
          loginSubDomain: 'login',
          users: [
              { name: '<full name>',  email: '<name@mail.com>' },
          ]
        }
      },
      /* Optional, if not specified uses default CloudFront and Cognito domains */
      domain: {
        name: 'demo.serverless-website-analytics.com',
        certificate: wildCardCertUsEast1,
        /* Optional, if not specified then no DNS records will be created. You will have to create the DNS records yourself. */
        hostedZone: route53.HostedZone.fromHostedZoneAttributes(this, 'HostedZone', {
          hostedZoneId: 'Z00387321EPPVXNC20CIS',
          zoneName: 'demo.serverless-website-analytics.com',
        }),
      }
    });

  }
}
```

Quick option rundown:
- `sites`: The list of allowed sites. This does not have to be a domain name, it can also be string. It can be anything
  you want to use to identify a site. The client side script that send analytics will have to specify one of these names.
- `allowedOrigins`: The origins that are allowed to make requests to the backend Ingest API. This CORS check is done as an extra
  security measure to prevent other sites from making requests to your backend. It must include the protocol and
  full domain. Ex: If your site is `example.com` and it can be accessed using `https://example.com` and
  `https://www.example.com` then both need to be listed. A value of `*` is specifies all origins are allowed.
- `auth`: The auth configuration which defaults to none. If you want to enable auth, you can specify either Basic Auth or
  Cognito auth but not both.
  - `undefined`: If not specified, then no authentication is applied, everything is publicly available.
  - `basicAuth`: Uses a CloudFront function to validate the Basic Auth credentials. The credentials are hard coded in
    the Lambda function. This is not the recommended for production, it also only secures the HTML page, the API is still
    accessible without auth.
  - `cognito`: Uses an AWS Cognito user pool. Users will get a temporary password via email after deployment. They will
    then be prompted to change their password on first login. This is the recommended option for production as it uses
    JWT tokens to secure the API as well.
- `domain`: If specified, it will create the CloudFront and Cognito resources at the specified domain and optionally
  create the DNS records in the specified Route53 hosted zone. If not specified, it uses the default autogenerated
  CloudFront(`cloudfront.net`) and Cognito(`auth.us-east-1.amazoncognito.com`) domains. You can read the website URL
  from the stack output.

For a full list of options see the [API.md](docs/API.md) docs.

### Client side setup

> ⚠️ IMPORTANT! **After** the client sent the first data, you have to click on the "Add Partitions" button in the
> frontend to auto discover and add the site, month, day partitions. Otherwise, the data will not show up in the charts.
> This operation has to be repeated at the beginning of every month.

Install the [client side library](https://www.npmjs.com/package/serverless-website-analytics-client):
```
npm install serverless-website-analytics-client
```

Irrelevant of the framework, you have to do the following to track page views on your site:

1. Initialize the client only once with `analyticsPageInit`. The site name must correspond with one that you specified
   when deploying the `serverless-website-analytics` backend. You also need the URL to the backend. Make sure your frontend
   site's `Origin` is whitelisted in the backend config.
2. On each route change call the `analyticsPageChange` function with the name of the new page.

The following sections show you how to do it in Vue, see [the readme of the client](https://github.com/rehanvdm/serverless-website-analytics-client-development#usage)
for various framework setups.

#### Vue

[_./serverless-website-analytics-client/usage/vue/vue-project/src/main.ts_](https://github.com/rehanvdm/serverless-website-analytics-client-development/blob/master/usage/vue/vue-project/src/main.ts)
```typescript
...
import * as swaClient from 'serverless-website-analytics-client';

const app = createApp(App);
app.use(router);

swaClient.v1.analyticsPageInit({
  inBrowser: true, //Not SSR
  site: "<Friendly site name>", //example.com
  apiUrl: "<Your serverless-website-analytics URL>", //https://my-serverless-website-analytics-backend.com
  // debug: true,
});
router.afterEach((event) => {
  swaClient.v1.analyticsPageChange(event.path);
});

app.mount('#app');
```

## What's in the box

The architecture consists of four components: frontend, backend, ingestion API and the client JS library.

![serverless-website-analytics.drawio.png](docs%2Fimgs%2Fserverless-website-analytics.drawio.png)

### Frontend

AWS CloudFront is used to host the frontend. The frontend is a SPA Vue 3 app that is hosted on S3 and served through
CloudFront. The [Element UI Plus](https://element-plus.org/en-US/) frontend framework is used for the UI components
and https://plotly.com/javascript/ for the charts.

![frontend_1.png](docs/imgs/frontend_1.png)
![frontend_2.png](docs/imgs/frontend_2.png)
![frontend_3.png](docs/imgs/frontend_3.png)

### Backend

This is a Lambda-lith hit through the Lambda Function URLs (FURL) by reverse proxing through CloudFront. It is written
in TypeScript and uses [tRPC](https://trpc.io/) to handle API requests.

The Queries to Athena are synchronous, the connection timeout between CloudFront and the FURL has been increased
to 60 seconds.

There are three available authentication configurations:
- **None**, it is open to the public
- **Basic Authentication**, basic protection for the index.html file
- **AWS Cogntio**, recommended for production

⚠️ Partitions are not automatically created in Athena, they have to be created manually by the user by clicking the
"Create/Refresh Partitions" button in the frontend. This has to be done when ever a new site is added or a new month
starts.

### Ingestion API

Similarly to the backend, it is also a TS Lambda-lith that is hit through the FURL by reverse proxing through CloudFront.
It also uses [tRPC](https://trpc.io/) but uses the  [trpc-openapi](https://github.com/jlalmes/trpc-openapi) package to
generate an OpenAPI spec. This is used to generate the API types used in the [client JS package](https://www.npmjs.com/package/serverless-website-analytics-client).
and can also be used to generate other language client libraries.

The lambda function then saves the data to S3 through a Kinesis Firehose. The Firehose is configured to save the data
in a partitioned manner, by site, year and month. The data is saved in parquet format. Location data is obtained by
looking the IP address up in the [MaxMind GeoLite2](https://dev.maxmind.com/geoip/geoip2/geolite2/) database. We don't
store any Personally Identifiable Information (PII) in the logs, the IP address is never stored.

## Contributing

See [CONTRIBUTING.md](docs/CONTRIBUTING.md) for more info on how to contribute + design decisions.

## Roadmap

Can be found in the [here](https://github.com/users/rehanvdm/projects/1/views/1)

# API Reference <a name="API Reference" id="api-reference"></a>

## Constructs <a name="Constructs" id="Constructs"></a>

### Swa <a name="Swa" id="serverless-website-analytics.Swa"></a>

#### Initializers <a name="Initializers" id="serverless-website-analytics.Swa.Initializer"></a>

```typescript
import { Swa } from 'serverless-website-analytics'

new Swa(scope: Construct, id: string, props: SwaProps)
```

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.Swa.Initializer.parameter.scope">scope</a></code> | <code>constructs.Construct</code> | *No description.* |
| <code><a href="#serverless-website-analytics.Swa.Initializer.parameter.id">id</a></code> | <code>string</code> | *No description.* |
| <code><a href="#serverless-website-analytics.Swa.Initializer.parameter.props">props</a></code> | <code><a href="#serverless-website-analytics.SwaProps">SwaProps</a></code> | *No description.* |

---

##### `scope`<sup>Required</sup> <a name="scope" id="serverless-website-analytics.Swa.Initializer.parameter.scope"></a>

- *Type:* constructs.Construct

---

##### `id`<sup>Required</sup> <a name="id" id="serverless-website-analytics.Swa.Initializer.parameter.id"></a>

- *Type:* string

---

##### `props`<sup>Required</sup> <a name="props" id="serverless-website-analytics.Swa.Initializer.parameter.props"></a>

- *Type:* <a href="#serverless-website-analytics.SwaProps">SwaProps</a>

---

#### Methods <a name="Methods" id="Methods"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#serverless-website-analytics.Swa.toString">toString</a></code> | Returns a string representation of this construct. |

---

##### `toString` <a name="toString" id="serverless-website-analytics.Swa.toString"></a>

```typescript
public toString(): string
```

Returns a string representation of this construct.

#### Static Functions <a name="Static Functions" id="Static Functions"></a>

| **Name** | **Description** |
| --- | --- |
| <code><a href="#serverless-website-analytics.Swa.isConstruct">isConstruct</a></code> | Checks if `x` is a construct. |

---

##### ~~`isConstruct`~~ <a name="isConstruct" id="serverless-website-analytics.Swa.isConstruct"></a>

```typescript
import { Swa } from 'serverless-website-analytics'

Swa.isConstruct(x: any)
```

Checks if `x` is a construct.

###### `x`<sup>Required</sup> <a name="x" id="serverless-website-analytics.Swa.isConstruct.parameter.x"></a>

- *Type:* any

Any object.

---

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.Swa.property.node">node</a></code> | <code>constructs.Node</code> | The tree node. |

---

##### `node`<sup>Required</sup> <a name="node" id="serverless-website-analytics.Swa.property.node"></a>

```typescript
public readonly node: Node;
```

- *Type:* constructs.Node

The tree node.

---


## Structs <a name="Structs" id="Structs"></a>

### AwsEnv <a name="AwsEnv" id="serverless-website-analytics.AwsEnv"></a>

The AWS environment (account and region) to deploy to.

#### Initializer <a name="Initializer" id="serverless-website-analytics.AwsEnv.Initializer"></a>

```typescript
import { AwsEnv } from 'serverless-website-analytics'

const awsEnv: AwsEnv = { ... }
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.AwsEnv.property.account">account</a></code> | <code>string</code> | *No description.* |
| <code><a href="#serverless-website-analytics.AwsEnv.property.region">region</a></code> | <code>string</code> | *No description.* |

---

##### `account`<sup>Required</sup> <a name="account" id="serverless-website-analytics.AwsEnv.property.account"></a>

```typescript
public readonly account: string;
```

- *Type:* string

---

##### `region`<sup>Required</sup> <a name="region" id="serverless-website-analytics.AwsEnv.property.region"></a>

```typescript
public readonly region: string;
```

- *Type:* string

---

### Domain <a name="Domain" id="serverless-website-analytics.Domain"></a>

Info about the domain to use for the site.

Defaults to an autogenerated `cloudfront.net` domain. You can read the
website URL from the stack output.

#### Initializer <a name="Initializer" id="serverless-website-analytics.Domain.Initializer"></a>

```typescript
import { Domain } from 'serverless-website-analytics'

const domain: Domain = { ... }
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.Domain.property.certificate">certificate</a></code> | <code>aws-cdk-lib.aws_certificatemanager.ICertificate</code> | The certificate to use for the domain. |
| <code><a href="#serverless-website-analytics.Domain.property.name">name</a></code> | <code>string</code> | Name of the domain to use for the site, example: `serverless-website-analytics.com`. |
| <code><a href="#serverless-website-analytics.Domain.property.hostedZone">hostedZone</a></code> | <code>aws-cdk-lib.aws_route53.IHostedZone</code> | Optional, if not specified then no DNS records will be created. |

---

##### `certificate`<sup>Required</sup> <a name="certificate" id="serverless-website-analytics.Domain.property.certificate"></a>

```typescript
public readonly certificate: ICertificate;
```

- *Type:* aws-cdk-lib.aws_certificatemanager.ICertificate

The certificate to use for the domain.

This certificate must be in the `us-east-1` region. It must be for the
domain specified in `domain.name` and {auth.cognito.loginSubDomain}.{domain.name}`

---

##### `name`<sup>Required</sup> <a name="name" id="serverless-website-analytics.Domain.property.name"></a>

```typescript
public readonly name: string;
```

- *Type:* string

Name of the domain to use for the site, example: `serverless-website-analytics.com`.

---

##### `hostedZone`<sup>Optional</sup> <a name="hostedZone" id="serverless-website-analytics.Domain.property.hostedZone"></a>

```typescript
public readonly hostedZone: IHostedZone;
```

- *Type:* aws-cdk-lib.aws_route53.IHostedZone

Optional, if not specified then no DNS records will be created.

You will have to create the DNS records yourself.

The Route53 hosted zone to add DNS records for CloudFront and Cognito. Cognito will be added as a subdomain of
the domain, for example: `{auth.cognito.loginSubDomain}.{domain.name}`.

---

### SwaAuth <a name="SwaAuth" id="serverless-website-analytics.SwaAuth"></a>

The auth configuration which defaults to none.

If you want to enable auth, you can specify either basic auth or
cognito auth but not both.

#### Initializer <a name="Initializer" id="serverless-website-analytics.SwaAuth.Initializer"></a>

```typescript
import { SwaAuth } from 'serverless-website-analytics'

const swaAuth: SwaAuth = { ... }
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.SwaAuth.property.basicAuth">basicAuth</a></code> | <code><a href="#serverless-website-analytics.SwaAuthBasicAuth">SwaAuthBasicAuth</a></code> | Uses a CloudFront function to validate the Basic Auth credentials. |
| <code><a href="#serverless-website-analytics.SwaAuth.property.cognito">cognito</a></code> | <code><a href="#serverless-website-analytics.SwaAuthCognito">SwaAuthCognito</a></code> | Uses an AWS Cognito user pool. |

---

##### `basicAuth`<sup>Optional</sup> <a name="basicAuth" id="serverless-website-analytics.SwaAuth.property.basicAuth"></a>

```typescript
public readonly basicAuth: SwaAuthBasicAuth;
```

- *Type:* <a href="#serverless-website-analytics.SwaAuthBasicAuth">SwaAuthBasicAuth</a>

Uses a CloudFront function to validate the Basic Auth credentials.

The credentials are hard coded in
the Lambda function. This is not the recommended for production, it also only secures the HTML page, the API is still
accessible without auth.

---

##### `cognito`<sup>Optional</sup> <a name="cognito" id="serverless-website-analytics.SwaAuth.property.cognito"></a>

```typescript
public readonly cognito: SwaAuthCognito;
```

- *Type:* <a href="#serverless-website-analytics.SwaAuthCognito">SwaAuthCognito</a>

Uses an AWS Cognito user pool.

Users will get a temporary password via email after deployment. They will
then be prompted to change their password on first login. This is the recommended option for production as it uses
JWT tokens to secure the API as well.

---

### SwaAuthBasicAuth <a name="SwaAuthBasicAuth" id="serverless-website-analytics.SwaAuthBasicAuth"></a>

#### Initializer <a name="Initializer" id="serverless-website-analytics.SwaAuthBasicAuth.Initializer"></a>

```typescript
import { SwaAuthBasicAuth } from 'serverless-website-analytics'

const swaAuthBasicAuth: SwaAuthBasicAuth = { ... }
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.SwaAuthBasicAuth.property.password">password</a></code> | <code>string</code> | The password to use for basic auth. |
| <code><a href="#serverless-website-analytics.SwaAuthBasicAuth.property.username">username</a></code> | <code>string</code> | The username to use for basic auth. |

---

##### `password`<sup>Required</sup> <a name="password" id="serverless-website-analytics.SwaAuthBasicAuth.property.password"></a>

```typescript
public readonly password: string;
```

- *Type:* string

The password to use for basic auth.

---

##### `username`<sup>Required</sup> <a name="username" id="serverless-website-analytics.SwaAuthBasicAuth.property.username"></a>

```typescript
public readonly username: string;
```

- *Type:* string

The username to use for basic auth.

---

### SwaAuthCognito <a name="SwaAuthCognito" id="serverless-website-analytics.SwaAuthCognito"></a>

#### Initializer <a name="Initializer" id="serverless-website-analytics.SwaAuthCognito.Initializer"></a>

```typescript
import { SwaAuthCognito } from 'serverless-website-analytics'

const swaAuthCognito: SwaAuthCognito = { ... }
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.SwaAuthCognito.property.loginSubDomain">loginSubDomain</a></code> | <code>string</code> | The unique domain prefix for the Cognito Hosted UI login page. |
| <code><a href="#serverless-website-analytics.SwaAuthCognito.property.users">users</a></code> | <code><a href="#serverless-website-analytics.SwaAuthCognitoUser">SwaAuthCognitoUser</a>[]</code> | An array of users that are allowed to login. |

---

##### `loginSubDomain`<sup>Required</sup> <a name="loginSubDomain" id="serverless-website-analytics.SwaAuthCognito.property.loginSubDomain"></a>

```typescript
public readonly loginSubDomain: string;
```

- *Type:* string

The unique domain prefix for the Cognito Hosted UI login page.

If no `domain` is specified, this will be used to
prefix the AWS provided domain for Cognito Hosted UI login. If `domain` is specified, then it will create the
Cognito Hosted UI login page at `{loginSubDomain}.${domain}`.

---

##### `users`<sup>Required</sup> <a name="users" id="serverless-website-analytics.SwaAuthCognito.property.users"></a>

```typescript
public readonly users: SwaAuthCognitoUser[];
```

- *Type:* <a href="#serverless-website-analytics.SwaAuthCognitoUser">SwaAuthCognitoUser</a>[]

An array of users that are allowed to login.

---

### SwaAuthCognitoUser <a name="SwaAuthCognitoUser" id="serverless-website-analytics.SwaAuthCognitoUser"></a>

#### Initializer <a name="Initializer" id="serverless-website-analytics.SwaAuthCognitoUser.Initializer"></a>

```typescript
import { SwaAuthCognitoUser } from 'serverless-website-analytics'

const swaAuthCognitoUser: SwaAuthCognitoUser = { ... }
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.SwaAuthCognitoUser.property.email">email</a></code> | <code>string</code> | The email of the user used as the username. |
| <code><a href="#serverless-website-analytics.SwaAuthCognitoUser.property.name">name</a></code> | <code>string</code> | The name of the user. |

---

##### `email`<sup>Required</sup> <a name="email" id="serverless-website-analytics.SwaAuthCognitoUser.property.email"></a>

```typescript
public readonly email: string;
```

- *Type:* string

The email of the user used as the username.

They will get a temporary password via email after deployment.

---

##### `name`<sup>Required</sup> <a name="name" id="serverless-website-analytics.SwaAuthCognitoUser.property.name"></a>

```typescript
public readonly name: string;
```

- *Type:* string

The name of the user.

---

### SwaProps <a name="SwaProps" id="serverless-website-analytics.SwaProps"></a>

#### Initializer <a name="Initializer" id="serverless-website-analytics.SwaProps.Initializer"></a>

```typescript
import { SwaProps } from 'serverless-website-analytics'

const swaProps: SwaProps = { ... }
```

#### Properties <a name="Properties" id="Properties"></a>

| **Name** | **Type** | **Description** |
| --- | --- | --- |
| <code><a href="#serverless-website-analytics.SwaProps.property.allowedOrigins">allowedOrigins</a></code> | <code>string[]</code> | The origins that are allowed to make requests to the backend `api-ingest` API. |
| <code><a href="#serverless-website-analytics.SwaProps.property.awsEnv">awsEnv</a></code> | <code><a href="#serverless-website-analytics.AwsEnv">AwsEnv</a></code> | The AWS environment (account and region) to deploy to. |
| <code><a href="#serverless-website-analytics.SwaProps.property.environment">environment</a></code> | <code>string</code> | A string added as a tag to the Lambda function to appear in logs. |
| <code><a href="#serverless-website-analytics.SwaProps.property.sites">sites</a></code> | <code>string[]</code> | The list of allowed sites. |
| <code><a href="#serverless-website-analytics.SwaProps.property.auth">auth</a></code> | <code><a href="#serverless-website-analytics.SwaAuth">SwaAuth</a></code> | The auth configuration which defaults to none. |
| <code><a href="#serverless-website-analytics.SwaProps.property.domain">domain</a></code> | <code><a href="#serverless-website-analytics.Domain">Domain</a></code> | If specified, it will create the CloudFront and Cognito resources at the specified domain and optionally create the DNS records in the specified Route53 hosted zone. |

---

##### `allowedOrigins`<sup>Required</sup> <a name="allowedOrigins" id="serverless-website-analytics.SwaProps.property.allowedOrigins"></a>

```typescript
public readonly allowedOrigins: string[];
```

- *Type:* string[]

The origins that are allowed to make requests to the backend `api-ingest` API.

This CORS check is done as an extra
security measure to prevent other sites from making requests to your backend. It must include the protocol and
full domain. Ex: If your site is `example.com` and it can be accessed using `https://example.com` and
`https://www.example.com` then both need to be listed. A value of `*` is specifies all origins are allowed.

---

##### `awsEnv`<sup>Required</sup> <a name="awsEnv" id="serverless-website-analytics.SwaProps.property.awsEnv"></a>

```typescript
public readonly awsEnv: AwsEnv;
```

- *Type:* <a href="#serverless-website-analytics.AwsEnv">AwsEnv</a>

The AWS environment (account and region) to deploy to.

---

##### `environment`<sup>Required</sup> <a name="environment" id="serverless-website-analytics.SwaProps.property.environment"></a>

```typescript
public readonly environment: string;
```

- *Type:* string

A string added as a tag to the Lambda function to appear in logs.

Not really used for anything else.

---

##### `sites`<sup>Required</sup> <a name="sites" id="serverless-website-analytics.SwaProps.property.sites"></a>

```typescript
public readonly sites: string[];
```

- *Type:* string[]

The list of allowed sites.

This does not have to be a domain name, it can also be string. It can be anything
you want to use to identify a site. The client side script that send analytics will have to specify one of these
names. Ex: example.com

---

##### `auth`<sup>Optional</sup> <a name="auth" id="serverless-website-analytics.SwaProps.property.auth"></a>

```typescript
public readonly auth: SwaAuth;
```

- *Type:* <a href="#serverless-website-analytics.SwaAuth">SwaAuth</a>

The auth configuration which defaults to none.

If you want to enable auth, you can specify either basic auth or
cognito auth but not both.

---

##### `domain`<sup>Optional</sup> <a name="domain" id="serverless-website-analytics.SwaProps.property.domain"></a>

```typescript
public readonly domain: Domain;
```

- *Type:* <a href="#serverless-website-analytics.Domain">Domain</a>

If specified, it will create the CloudFront and Cognito resources at the specified domain and optionally create the DNS records in the specified Route53 hosted zone.

If not specified, it uses the default autogenerated CloudFront(`cloudfront.net`) and
Cognito(`auth.us-east-1.amazoncognito.com`) domains. You can read the website URL from the stack output.

---



